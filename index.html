<!DOCTYPE html>
<html lang="zh-CN">

<head>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¯¼èˆª</title>
  <link rel="favicon.png">
  <style>
    :root {
      --bg: #0b1220;
      --card: #121a2b;
      --muted: #7b8aa5;
      --text: #e6eefc;
      --brand: #3b82f6;
      --ok: #22c55e;
      --warn: #f59e0b;
      --err: #ef4444;
      --disabled: #334155;
      --border: #1f2a44;
      --link: #93c5fd;
      --shadow: 0 10px 30px rgba(0, 0, 0, .25);
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Inter, Helvetica, Arial, 'Noto Sans SC', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      background: radial-gradient(1200px 600px at 20% -10%, #1b2750 0%, transparent 60%),
        radial-gradient(800px 500px at 100% 0%, #0f1630 0%, transparent 50%),
        var(--bg);
      color: var(--text);
    }

    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: saturate(1.2) blur(10px);
      background: linear-gradient(180deg, rgba(3, 8, 23, .85), rgba(3, 8, 23, .55));
      border-bottom: 1px solid var(--border);
    }

    .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px 20px
    }

    .row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center
    }

    .space {
      flex: 1
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: .3px;
      display: flex;
      align-items: center;
      gap: 10px
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: rgba(17, 24, 39, .6)
    }

    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%
    }

    .search {
      position: relative;
      flex: 1;
      min-width: 240px
    }

    .search input {
      width: 100%;
      padding: 10px 12px 10px 40px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, .75);
      color: var(--text);
      outline: none
    }

    .search svg {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      opacity: .7
    }

    .btn {
      cursor: pointer;
      padding: 9px 12px;
      border: 1px solid var(--border);
      color: var(--text);
      background: rgba(15, 23, 42, .6);
      border-radius: 10px
    }

    .btn:hover {
      border-color: #29447a
    }

    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px 20px 80px
    }

    .section {
      margin-top: 20px
    }

    .section h2 {
      font-size: 16px;
      font-weight: 700;
      color: #c9d7f2;
      margin: 0 0 10px 4px
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 14px
    }

    .card {
      background: linear-gradient(180deg, rgba(17, 24, 39, .85), rgba(17, 24, 39, .65));
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      box-shadow: var(--shadow);
      position: relative
    }

    .card a {
      display: block;
      color: var(--text);
      text-decoration: none
    }

    .card .name {
      font-weight: 700;
      margin-bottom: 6px
    }

    .card .desc {
      color: var(--muted);
      text-align: right;
      font-size: 12px
    }

    .card .chip {
      position: absolute;
      right: 10px;
      top: 10px;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 8px;
      border: 1px solid var(--border);
      color: #a5b4fc
    }

    .hidden {
      display: none !important
    }

    .hint {
      font-size: 12px;
      color: #9fb1d1;
      margin-top: 6px
    }

    footer {
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px 20px 30px;
      color: #93a2bf;
      font-size: 12px
    }

    code.inline {
      background: #0e1a36;
      color: #e4efff;
      border: 1px solid #1f2d55;
      padding: 2px 6px;
      border-radius: 6px
    }

    .probe {
      font-size: 12px;
      margin-top: 6px;
      color: #9fb1d1
    }

    .probe .ok {
      color: var(--ok)
    }

    .probe .bad {
      color: var(--err)
    }

    .probe .warn {
      color: var(--warn)
    }


    /* åç§°è¡Œå®¹å™¨ï¼šè®©å›¾æ ‡å’Œæ ‡é¢˜å¹¶æ’æ˜¾ç¤º */
    .head {
      display: flex;
      align-items: center;
      gap: 8px;
      /* å›¾æ ‡ä¸æ ‡é¢˜çš„é—´è· */
      min-height: 20px;
      /* ç»™å°å›¾æ ‡ä¸€ç‚¹å‚ç›´ç©ºé—´ï¼Œé¿å…ç´§è´´ */
    }

    /* å›¾æ ‡ï¼šä¸å† absoluteï¼Œéšæ–‡æœ¬è‡ªç„¶æ’ç‰ˆåœ¨å·¦ä¾§ */
    .icon {
      width: 48px;
      height: 32px;
      flex: 0 0 48px;
      /* å›ºå®šå®½åº¦ï¼Œä¸ä¼šè¢«å‹ç¼© */
      border-radius: 3px;
      object-fit: contain;
      /* é€‚åº”å„ç§æ¯”ä¾‹çš„å›¾æ ‡ */
      opacity: .95;
    }

    /* å›¾æ ‡åŠ è½½å¤±è´¥çš„å ä½æ ·å¼ï¼ˆå¯é€‰ï¼‰ */
    .icon-fallback {
      background: linear-gradient(135deg, #1f2a44, #354b7a);
      border: 1px solid #1f2a44;
    }

    /* æ ‡é¢˜æ ·å¼ï¼šä¿æŒä½ åŸæœ‰çš„ name é£æ ¼å³å¯ */
    .name {
      font-weight: 700;
    }
  </style>
</head>

<body>
  <header>
    
    <div class="wrap">
      <div class="row">
        <div class="title">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 7h18M6 12h12M9 17h6" stroke="#9fb4ff" stroke-width="1.6" stroke-linecap="round" />
          </svg>
          å¯¼èˆª
          <span id="statusBadge" class="badge">
            <span class="dot" id="statusDot" style="background:var(--warn)"></span>
            <span id="statusText">æ­£åœ¨æ£€æµ‹ç½‘ç»œâ€¦</span>
          </span>
        </div>
        <div class="space"></div>
        <div class="search">
          <input id="searchInput" placeholder="æœç´¢ç«™ç‚¹ / å¿«æ·é”®ï¼š/" />
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 21l-4.2-4.2M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="#9fb1d1" stroke-width="1.6"
              stroke-linecap="round" />
          </svg>
        </div>
        <button class="btn" id="btnCheck">é‡æ–°æ£€æµ‹</button>
      </div>
      <div class="probe" id="probeInfo"></div>
    </div>
  </header>

  <main>
    <div class="section" id="secIntranet">
      <h2>ğŸ </h2>
      <div id="intranetGrid" class="grid"></div>
      <div class="hint">å½“æ£€æµ‹ä¸ºâ€œå¤–ç½‘/ç¦»çº¿â€æ—¶ï¼Œå†…ç½‘é“¾æ¥å°†è¢«**éšè—**ã€‚</div>
    </div>

    <div class="section">
      <h2>ğŸŒ</h2>
      <div id="internetGrid" class="grid"></div>
    </div>
  </main>

  <footer>
    <!--<div>æç¤ºï¼šå¦‚éœ€æ›´ç²¾å‡†çš„å†…å¤–ç½‘åˆ¤æ–­ï¼Œè¯·åœ¨æœ¬é¡µé¢åº•éƒ¨ <code class="inline">CONFIG.detection</code> ä¸­é…ç½®è´µå¸çš„å†…ç½‘æ¢æµ‹åœ°å€ï¼ˆå»ºè®®è®¾ç½®ä¸º <code class="inline">HTTPS</code> ä»¥é¿å…æµè§ˆå™¨çš„å±€åŸŸç½‘è®¿é—®é™åˆ¶ï¼‰ã€‚</div>-->
  </footer>

  <!-- ================== é…ç½®åŒºï¼ˆè¯·æŒ‰éœ€ä¿®æ”¹ï¼‰ ================== -->
  <script>
    const CONFIG = {
      detection: {
        timeoutMs: 2500,
        recheckEveryMs: 60 * 1000,
        intranetProbes: [
          // â†“â†“â†“ å°†ä»¥ä¸‹åœ°å€æ›¿æ¢ä¸ºè´µå¸å†…ç½‘å¯è¾¾ä¸”è½»é‡çš„æ¢æµ‹ç«¯ç‚¹ï¼ˆå°½é‡ httpsï¼‰ï¼Œä¾‹å¦‚å†…ç½‘é—¨æˆ·çš„å°å›¾æ ‡/favicon
          { url: 'http://192.168.100.1/', label: 'ç½‘å…³ 192.168.100.1' },
        ],
        internetProbes: [
          { url: 'https://www.baidu.com/favicon.ico', label: 'ğŸŒ' },
        ]
      },
      links: {
        intranet: [
          { name: 'AX6', url: 'http://192.168.100.1', icon: 'icons/openwrt.png', desc: 'è·¯ç”±å™¨', category: 'è¿ç»´' },
          { name: 'Lucky', url: 'http://192.168.100.1:16601/xwall', icon: 'icons/lucky.svg', desc: 'ç½‘ç»œå·¥å…·ä¸è§£å†³æ–¹æ¡ˆ', category: 'è¿ç»´' },
          { name: 'DS120j', url: 'http://192.168.100.100:5000', icon: 'icons/lucky.svg',desc: 'èµ„æ–™ç®¡ç†ç³»ç»Ÿ', category: 'åä½œ' },
          { name: 'Memos', url: 'http://192.168.100.100:5230', icon: 'icons/memos.png', desc: 'è‡ªæ‰˜ç®¡ç¬”è®°', category: 'åä½œ' },
          { name: 'Aria2', url: 'http://192.168.100.100:4321', icon: 'icons/lucky.svg',desc: 'Aria2ä¸‹è½½', category: 'ä¸‹è½½' },
          { name: '1Panel', url: 'http://192.168.100.211:32320/wll', icon: 'icons/1panel.png',desc: 'è¿ç»´ä¸ç›‘æ§', category: 'è¿ç»´' },
        ],
        internet: [
          { name: 'AX6', url: 'https://i.w60.de5.net:2087', icon: 'icons/openwrt.png', desc: 'è·¯ç”±å™¨', category: 'è¿ç»´' },
          { name: 'Lucky', url: 'https://lucky.w60.de5.net:2087/xwall',icon: 'icons/lucky.svg',  desc: 'ç½‘ç»œå·¥å…·ä¸è§£å†³æ–¹æ¡ˆ', category: 'è¿ç»´' },
          { name: 'DS120j', url: 'https://ds120j.w60.de5.net:2087', icon: 'icons/dsm.png',desc: 'èµ„æ–™ç®¡ç†ç³»ç»Ÿ', category: 'åä½œ' },
          { name: 'Memos', url: 'https://memos.w60.de5.net:2087', icon: 'icons/memos.png', desc: 'è‡ªæ‰˜ç®¡ç¬”è®°', category: 'åä½œ' },
          { name: 'AriaNg', url: 'https://aria.w60.de5.net:2087',icon: 'icons/ariang.png',desc: 'Aria2ä¸‹è½½', category: 'ä¸‹è½½' },
          { name: '1Panel', url: 'https://oect.w60.de5.net:2087/wll', icon: 'icons/1panel.png', desc: 'è¿ç»´ä¸ç›‘æ§', category: 'è¿ç»´' },
          { name: 'GitHub', url: 'https://github.com/', icon: 'icons/github.png',desc: 'ä»£ç ä»“åº“', category: 'ç ”å‘' },
          { name: 'Cloudflare', url: 'https://dash.cloudflare.com/',icon: 'icons/cloudflare.ico', desc: 'äº’è”ç½‘åŸºç¡€è®¾æ–½', category: 'è¿ç»´' },
          { name: 'cnBeta', url: 'https://m.cnbeta.com.tw/wap', icon: 'icons/cnbeta.png', desc: 'äº’è”ç½‘èµ„è®¯', category: 'èµ„è®¯' },
          { name: '12306', url: 'https://www.12306.cn/index/', icon: 'icons/12306.png', desc: 'ç«è½¦ç¥¨', category: 'æ—…è¡Œ' },
          
        ]
      }
    };
  </script>

  <!-- ================== é€»è¾‘åŒºï¼ˆæ— éœ€ä¿®æ”¹ï¼‰ ================== -->
  <script>
    function pingImage(url, timeoutMs) {
      return new Promise((resolve) => {
        const img = new Image();
        let settled = false;
        const timer = setTimeout(() => { if (!settled) { settled = true; cleanup(); resolve({ ok: false, reason: 'timeout' }); } }, timeoutMs);
        function cleanup() { clearTimeout(timer); img.onload = img.onerror = null; }
        img.onload = () => { if (!settled) { settled = true; cleanup(); resolve({ ok: true, reason: 'load' }); } };
        img.onerror = () => { if (!settled) { settled = true; cleanup(); resolve({ ok: false, reason: 'error' }); } };
        const sep = url.includes('?') ? '&' : '?';
        img.src = url + sep + 't=' + Date.now();
      });
    }

    async function probeSet(list, timeoutMs) {
      if (!list || !list.length) return { any: false, details: [] };
      const tasks = list.map(async p => {
        const r = await pingImage(p.url, timeoutMs);
        return { label: p.label || p.url, url: p.url, ok: r.ok, reason: r.reason };
      });
      const details = await Promise.all(tasks);
      const any = details.some(d => d.ok);
      return { any, details };
    }

    function computeStatus(intra, inter) {
      if (intra.any && inter.any) return { key: 'both', text: 'ğŸ  & ğŸŒ', color: 'var(--ok)' };
      if (intra.any && !inter.any) return { key: 'intranet', text: 'ğŸ ', color: 'var(--ok)' };
      if (!intra.any && inter.any) return { key: 'internet', text: 'ğŸŒ', color: 'var(--warn)' };
      return { key: 'offline', text: 'â›“ï¸â€ğŸ’¥', color: 'var(--err)' };
    }

    function el(id) { return document.getElementById(id); }

    function updateStatusUI(status, intra, inter) {
      el('statusText').textContent = status.text;
      el('statusDot').style.background = status.color;
      const lines = [];
      const fmt = (d) => `${d.ok ? 'âœ…' : 'â›”'} ${d.label} ${(d.ok ? 'æˆåŠŸ' : 'å¤±è´¥')}${d.reason === 'timeout' ? ' Â· è¶…æ—¶' : ''}`;
      //if (intra.details.length) lines.push('å†…ç½‘æ¢æµ‹ï¼š' + intra.details.map(fmt).join('  |  '));
      //if (inter.details.length) lines.push('| å¤–ç½‘æ¢æµ‹ï¼š' + inter.details.map(fmt).join('  |  '));
      //if (!lines.length) lines.push('å°šæœªé…ç½®æ¢æµ‹åœ°å€ï¼Œå»ºè®®åœ¨ CONFIG.detection ä¸­æ·»åŠ ã€‚');
      el('probeInfo').textContent = lines.join(' \n ');

      // å˜æ›´ç‚¹ï¼šå½“å†…ç½‘ä¸å¯ç”¨æ—¶ï¼Œéšè—æ•´ä¸ªâ€œå†…ç½‘åº”ç”¨â€åŒºå—
      const secIntranet = el('secIntranet');
      if (intra.any) {
        secIntranet.classList.remove('hidden');
      } else {
        secIntranet.classList.add('hidden');
      }
    }

    async function detectOnce() {
      const { timeoutMs, intranetProbes, internetProbes } = CONFIG.detection;
      el('statusText').textContent = 'æ­£åœ¨æ£€æµ‹ç½‘ç»œâ€¦';
      el('statusDot').style.background = 'var(--warn)';

      const [intra, inter] = await Promise.all([
        probeSet(intranetProbes, timeoutMs),
        probeSet(internetProbes, timeoutMs)
      ]);
      const status = computeStatus(intra, inter);
      updateStatusUI(status, intra, inter);
      return { status, intra, inter };
    }



    function renderLinks() {
      const makeCard = (link) => {
        const div = document.createElement('div');
        div.className = 'card';

        const a = document.createElement('a');
        a.href = link.url;
        a.target = '_blank';
        a.rel = 'noopener';

        // ç»“æ„ï¼šchipï¼ˆå³ä¸Šè§’åˆ†ç±»ï¼‰ã€headï¼ˆå›¾æ ‡ + åç§°ï¼‰ã€descï¼ˆæè¿°ï¼‰
        a.innerHTML = `
      <div class="chip">${link.category || ''}</div>
      <div class="head">
        <div class="name">${link.name}</div>
      </div>
      <div class="desc">${link.desc || ''}</div>
    `;

        // å¦‚æœé…ç½®äº† iconï¼Œåˆ™æŠŠå›¾æ ‡æ’å…¥åˆ° head çš„æœ€å‰é¢ï¼ˆåœ¨æ ‡é¢˜å·¦è¾¹ï¼‰
        if (link.icon) {
          const img = document.createElement('img');
          img.className = 'icon';
          img.src = link.icon;
          img.alt = '';
          img.loading = 'lazy';
          img.onerror = () => { img.classList.add('icon-fallback'); img.removeAttribute('src'); };
          a.querySelector('.head').prepend(img);
        }

        div.appendChild(a);
        return div;
      };

      const intranetGrid = el('intranetGrid');
      const internetGrid = el('internetGrid');
      intranetGrid.innerHTML = '';
      internetGrid.innerHTML = '';
      CONFIG.links.intranet.forEach(l => intranetGrid.appendChild(makeCard(l)));
      CONFIG.links.internet.forEach(l => internetGrid.appendChild(makeCard(l)));
    }



    function setupSearch() {
      const input = el('searchInput');
      function applyFilter() {
        const q = input.value.trim().toLowerCase();
        const allCards = document.querySelectorAll('.card');
        allCards.forEach(card => {
          const text = card.textContent.toLowerCase();
          card.style.display = q ? (text.includes(q) ? '' : 'none') : '';
        });
      }
      input.addEventListener('input', applyFilter);
      window.addEventListener('keydown', (e) => { if (e.key === '/' && document.activeElement !== input) { e.preventDefault(); input.focus(); } });
    }

    function autoRecheck() {
      const period = CONFIG.detection.recheckEveryMs;
      if (period && period > 0) setInterval(detectOnce, period);
      window.addEventListener('online', detectOnce);
      window.addEventListener('offline', detectOnce);
      el('btnCheck').addEventListener('click', detectOnce);
    }

    //
    // ä½¿ç”¨ï¼šconst iconUrl = link.icon || guessFavicon(link.url);

    // åˆå§‹åŒ–
    renderLinks();
    detectOnce();
    setupSearch();
    autoRecheck();

  </script>
</body>

</html>
